#!/bin/bash

# ä¸‡è±¡è¡Œè€… å¿«é€ŸAPKæ„å»ºæŒ‡å—è„šæœ¬

echo "ğŸ® ä¸‡è±¡è¡Œè€… Android APK å¿«é€Ÿæ„å»ºæŒ‡å—"
echo "========================================"
echo ""

# æ˜¾ç¤ºå½“å‰ç¯å¢ƒçŠ¶æ€
echo "ğŸ“Š å½“å‰ç¯å¢ƒçŠ¶æ€:"
echo "âœ… Node.js: $(node --version)"
echo "âœ… npm: $(npm --version)"
echo "âœ… Capacitor: $(npx cap --version)"
echo "âŒ Java: æœªå®‰è£…"
echo "âŒ Android SDK: æœªé…ç½®"
echo ""

echo "ğŸš¨ é‡è¦è¯´æ˜:"
echo "æ‚¨ä¹‹å‰å°è¯•çš„å‘½ä»¤ 'Build > Build Bundle(s)/APK(s) > Build APK(s)' æ˜¯ Android Studio çš„èœå•æ“ä½œï¼Œä¸æ˜¯ç»ˆç«¯å‘½ä»¤ï¼"
echo ""

echo "ğŸ¯ æ¨èè§£å†³æ–¹æ¡ˆ (æŒ‰ä¼˜å…ˆçº§æ’åº):"
echo ""

echo "æ–¹æ¡ˆ1: ä½¿ç”¨ Android Studio (æœ€ç®€å•) ğŸŒŸ"
echo "----------------------------------------"
echo "1. ä¸‹è½½å®‰è£… Android Studio:"
echo "   https://developer.android.com/studio"
echo ""
echo "2. å®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯è¿è¡Œ:"
echo "   npx cap open android"
echo ""
echo "3. åœ¨ Android Studio ä¸­:"
echo "   - ç­‰å¾…é¡¹ç›®åŠ è½½å®Œæˆ"
echo "   - ç‚¹å‡»èœå•: Build â†’ Build Bundle(s)/APK(s) â†’ Build APK(s)"
echo "   - APK å°†ç”Ÿæˆåœ¨: android/app/build/outputs/apk/debug/"
echo ""

echo "æ–¹æ¡ˆ2: å®‰è£…å®Œæ•´å¼€å‘ç¯å¢ƒ"
echo "----------------------------------------"
echo "1. å®‰è£… Java JDK:"
echo "   brew install openjdk@11"
echo ""
echo "2. å®‰è£… Android Studio (åŒ…å« Android SDK):"
echo "   brew install --cask android-studio"
echo ""
echo "3. é…ç½®ç¯å¢ƒå˜é‡ (æ·»åŠ åˆ° ~/.zshrc):"
echo "   export ANDROID_HOME=\$HOME/Library/Android/sdk"
echo "   export PATH=\$PATH:\$ANDROID_HOME/emulator"
echo "   export PATH=\$PATH:\$ANDROID_HOME/tools"
echo "   export PATH=\$PATH:\$ANDROID_HOME/tools/bin"
echo "   export PATH=\$PATH:\$ANDROID_HOME/platform-tools"
echo ""
echo "4. é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡:"
echo "   source ~/.zshrc"
echo ""
echo "5. æ„å»º APK:"
echo "   cd android && ./gradlew assembleDebug"
echo ""

echo "æ–¹æ¡ˆ3: ä½¿ç”¨ç°æœ‰è„šæœ¬ (éœ€è¦å…ˆå®‰è£…ä¾èµ–)"
echo "----------------------------------------"
echo "1. å…ˆå®Œæˆæ–¹æ¡ˆ2çš„ç¯å¢ƒé…ç½®"
echo "2. è¿è¡Œæ„å»ºè„šæœ¬:"
echo "   ./build-apk.sh"
echo ""

echo "ğŸ“‹ æ–‡ä»¶è¯´æ˜:"
echo "- APK_BUILD_INSTRUCTIONS.md: è¯¦ç»†æ„å»ºæŒ‡å—"
echo "- setup_build_env.sh: ç¯å¢ƒæ£€æŸ¥è„šæœ¬"
echo "- build-apk.sh: è‡ªåŠ¨æ„å»ºè„šæœ¬"
echo ""

echo "ğŸ¯ æœ€å¿«å¼€å§‹æ–¹å¼:"
echo "1. ä¸‹è½½ Android Studio: https://developer.android.com/studio"
echo "2. å®‰è£…å®Œæˆåè¿è¡Œ: npx cap open android"
echo "3. åœ¨ Android Studio ä¸­ç‚¹å‡»æ„å»ºèœå•"
echo ""
echo "é¢„æœŸç»“æœ: ç”Ÿæˆ ~850MB çš„å®Œæ•´æ¸¸æˆ APK æ–‡ä»¶"
echo "========================================"